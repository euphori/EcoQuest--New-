[gd_resource type="StandardMaterial3D" load_steps=5 format=3 uid="uid://pi8xdgocs1ry"]

[ext_resource type="Shader" path="res://src/cel-shader-base.gdshader" id="1_7mlf5"]

[sub_resource type="Shader" id="Shader_7bomn"]
code = "shader_type spatial;

render_mode cull_front, unshaded, depth_draw_never;

global uniform vec4 outline_color;
global uniform float outline_width;

void vertex() {
	vec4 clip_position = 
			PROJECTION_MATRIX *
			(MODELVIEW_MATRIX * vec4(VERTEX, 1.0));
	vec3 clip_normal =
			mat3(PROJECTION_MATRIX) *
			(mat3(MODELVIEW_MATRIX) * NORMAL);
	clip_position.xy +=
			normalize(clip_normal.xy) /
			VIEWPORT_SIZE *
			clip_position.w *
			outline_width;
	POSITION = clip_position;
}

void fragment() {
	ALBEDO = outline_color.rgb;
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_d5gso"]
render_priority = 0
shader = SubResource("Shader_7bomn")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_n3rj4"]
render_priority = 0
next_pass = SubResource("ShaderMaterial_d5gso")
shader = ExtResource("1_7mlf5")
shader_parameter/color = Color(0.227451, 0.490196, 0.584314, 1)
shader_parameter/specular = Color(0.3, 0.3, 0.3, 0.5)
shader_parameter/fresnel = Color(0.2, 0.2, 0.2, 0.3)
shader_parameter/uv_scale = Vector2(1, 1)
shader_parameter/uv_offset = Vector2(0, 0)

[resource]
resource_name = "wood3"
next_pass = SubResource("ShaderMaterial_n3rj4")
cull_mode = 2
vertex_color_use_as_albedo = true
albedo_color = Color(0.427451, 0.270588, 0.160784, 1)
